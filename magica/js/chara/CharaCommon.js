define("underscore backbone backboneCommon ajaxControl cardUtil command js/view/chara/CharaListView js/view/chara/CharaDataView js/view/chara/CharaResultView js/view/chara/CharaImgView js/view/chara/RicheView".split(" "),function(v,k,c,l,w,d,m,n,p,q,r){var g=k.Model.extend(),a={},t=k.View.extend({className:"confirmPopupCurtain",render:function(){this.$el.html();return this}});a.CharaResultView=p;var h=null;a.charaViewInit=function(b){var e=c.location.split("CharaList")[1].toLowerCase();a.curtainView||
(a.curtainView=new t,$("#baseContainer").append(a.curtainView.render().el));a.charaDataView||(a.charaDataView=new n({model:new g}),a.charaDataView.ccommon=this,$("#baseContainer").append(a.charaDataView.render().el));a.charaDataView.el.className=e+" show";a.richeView||(a.richeView=new r({model:new g(l.getPageJson())}),$("#baseContainer").append(a.richeView.render().el));a.charaImgView||(a.charaImgView=new q({model:new g}),c.content.append(a.charaImgView.render().el));a.charaListView?a.charaListView.initSelectCardId=
b:(a.charaListView=new m({model:new g,collection:c.storage.userCardListEx}),c.content.append(a.charaListView.render().el),a.charaListView.initSelectCardId=b,a.charaListView.charaDataView=a.charaDataView,a.charaListView.charaImgView=a.charaImgView);a.charaListView.cardSort.multiSort();c.scrollSetX("charaListScrollWrap","list");d.getBaseData(c.getNativeObj());h=setTimeout(function(){c.removeClass(c.doc.querySelector("#btnArea"),"offLink")},750)};a.charaViewRemove=function(){-1==c.location.indexOf("CharaListTop")&&
-1==c.location.indexOf("CharaListCompose")&&-1==c.location.indexOf("CharaListComposeMagia")&&-1==c.location.indexOf("CharaListCustomize")&&-1==c.location.indexOf("CharaListEquip")&&(a.charaListView&&a.charaListView.trigger("remove"),a.charaDataView&&a.charaDataView.remove(),a.charaImgView&&a.charaImgView.remove(),a.charaListView&&a.charaListView.removeView(),a.richeView&&a.richeView.remove(),a.curtainView&&a.curtainView.remove(),a.charaDataView=null,a.charaImgView=null,a.charaListView=null,a.richeView=
null,f=a.curtainView=null,d.hideMiniChara(),h&&clearTimeout(h))};var f=null;a.showMiniChara=function(a,e,u){if(a!=f||f&&e||u){e||(f=a);var b={};b.id=String(f);b.x=400;b.y=Math.floor(c.doc.getElementsByTagName("body")[0].offsetHeight/2)+95;b.fade=.3;b.animeList=[c.miniCharaStandPose];d.hideMiniChara();setTimeout(function(){d.showMiniChara(b)},50)}};a.hideMiniChara=function(a){d.hideMiniChara();a||(f=null)};a.playComposeEffect=function(){var a={x:400};a.y=Math.floor(c.doc.getElementsByTagName("body")[0].offsetHeight/
2)+95;d.playComposeEffect(a)};a.playCustomizeEffect=function(a,e){var b={x:400};b.y=Math.floor(c.doc.getElementsByTagName("body")[0].offsetHeight/2)+95;b.type=a;e&&(b.value=e);d.playCustomizeEffect(b)};a.playComposeResultEffect=function(a){var b={x:400};b.y=Math.floor(c.doc.getElementsByTagName("body")[0].offsetHeight/2)+95;b.type=a||1;d.playComposeResultEffect(b)};a.playComposeMagiaEffect=function(){var a={x:400};a.y=Math.floor(c.doc.getElementsByTagName("body")[0].offsetHeight/2)+95;d.playComposeMagiaEffect(a)};
a.charaSelect=function(b){$("#charaListElms .select").removeClass("select");c.addClass(b.el,"select");a.charaListView&&a.charaListView.selectCardId!=b.model.toJSON().userCardId&&(a.charaListView.selectCardId=b.model.toJSON().userCardId,a.charaListView.charaDataView.model.clear({silent:!0}),a.charaListView.charaImgView.model.clear({silent:!0}),a.charaListView.charaDataView.model.set(b.model.toJSON()),a.charaListView.charaImgView.model.set(b.model.toJSON()),d.getBaseData(c.getNativeObj()))};return a});