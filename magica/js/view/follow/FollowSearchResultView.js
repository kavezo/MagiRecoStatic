define(["underscore","backbone","backboneCommon","ajaxControl","js/view/follow/FollowTopListView"],function(g,e,d,m,f){return e.View.extend({initialize:function(){this.listenTo(this.rootView,"removeView",this.removeView);f.prototype.parentView=this;f.prototype.template=g.template($("#userParts").text())},addResult:function(c){if(!(1>c.length)){var h=document.createDocumentFragment(),e=Date.parse(m.getPageJson().currentTime)/1E3,k=!1;c[0].fields&&(k=!0);var l=0;g.each(c,function(a,b){b={};if(k)for(var c in a.fields)b[c]=
a.fields[c][0];else b=a._source;a._id===d.storage.gameUser.get("userId")||d.storage.userFollowList.findWhere({followUserId:a._id})||(l++,b.id=a._id,(a=b.lastAccessDate?Date.parse(b.lastAccessDate)/1E3:null)?(a=(e-a)/60,16>a?a="15 Min(s) Ago":60>a?a=Math.floor(a)+" Min(s) Ago":60<a&&1440>a?a=Math.floor(a/60)+" Hour(s) Ago":(a=a/60/24,a=30<a?Math.floor(a/30)+" Month(s) Ago":Math.floor(a)+" Day(s) Ago")):a="- Day(s) Ago",b.loginTimeLag=a,b=new f({model:b},"search"),h.appendChild(b.render().el))});0<
l?d.doc.getElementById("findListWrap").appendChild(h):d.doc.getElementById("findListWrap").innerHTML="\x3cdiv class\x3d'noUser'\x3eNo Matching Player\x3c/div\x3e"}},removeView:function(){this.off();this.remove()}})});