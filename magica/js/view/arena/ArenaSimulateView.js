define("underscore backbone backboneCommon ajaxControl command text!template/arena/ArenaSimulate.html js/view/arena/ArenaPartsView js/view/arena/ArenaInfoPartsView".split(" "),function(p,t,a,h,g,u,q,r){var e=0,f=["Rank","Team","Player Name"],k="desc";return t.View.extend({events:function(){var b={};b[a.cgti+" #listSortBtn"]=this.listSortBtn;b[a.cgti+" #listAscBtn"]=this.listAscBtn;return b},initialize:function(){this.template=p.template(u);this.createDom()},render:function(){this.model=h.getPageJson();
this.$el.html(this.template({model:this.model}));return this},createDom:function(){a.content.append(this.render().el);this.createView();a.setGlobalView();g.getBaseData(a.getNativeObj());a.firstNaviCheck(h.getPageJson());a.ready.hide()},createView:function(){r.prototype.rootView=this;this.infoView=new r;a.doc.getElementById("bpGuageFreeRank").appendChild(this.infoView.render().el);a.doc.querySelector("#listSortBtn").innerHTML="\x3cspan class\x3d'b_screen'\x3e\x3c/span\x3e"+f[e];a.addClass(a.doc.querySelector("#listAscBtn"),
k);this.createMattingList()},createMattingList:function(){var b=this.model.userArenaBattleMatch,l=[];if(0<b.opponentUserIdList.length){for(var f=b.opponentUserArenaBattleInfoList,m=0,h=f.length;m<h;){var n={},n=f[m];n.battleType=b.arenaBattleType;l.push(n);n=null;m=m+1|0}var d="asc"==k?1:-1;l.sort(function(c,a){if(0==e)return c.userRank>a.userRank?1*d:c.userRank<a.userRank?-1*d:c.userRatingPoint>a.userRatingPoint?1*d:c.userRatingPoint<a.userRatingPoint||c.userName>a.userName?-1*d:c.userName<a.userName?
1*d:0;if(1==e){if(c.userRatingPoint>a.userRatingPoint)return 1*d;if(c.userRatingPoint<a.userRatingPoint)return-1*d;if(c.userRank>a.userRank)return 1*d;if(c.userRank<a.userRank)return-1*d;if(c.userName>a.userName)return 1*d;if(c.userName<a.userName)return-1*d}else{if(c.userName>a.userName)return 1*d;if(c.userName<a.userName)return-1*d;if(c.userRank>a.userRank)return 1*d;if(c.userRank<a.userRank)return-1*d;if(c.userRatingPoint>a.userRatingPoint)return 1*d;if(c.userRatingPoint<a.userRatingPoint)return-1*
d}})}q.prototype.rootView=this;q.prototype.template=p.template($("#arenaParts").text());if(0<l.length){var g=a.doc.createDocumentFragment();p.each(l,function(a,b){console.log(a);a=new q(a);g.appendChild(a.render().el)});a.doc.getElementById("matchingList").appendChild(g);a.scrollSet("matchingWrap","scrollInner")}else a.doc.getElementById("matchingList").innerHTML='\x3cli class\x3d"nomatch"\x3eNo available Friends to battle.\x3cbr\x3e\x3cbr\x3eYou can only battle Friends that follow you back.\x3c/li\x3e'},
reloadFunc:function(){this.trigger("resetListView");this.createMattingList();g.getBaseData(a.getNativeObj())},listSortBtn:function(b){b.preventDefault();a.isScrolled()||(e++,e>=f.length&&(e=0),b.currentTarget.innerHTML="\x3cspan class\x3d'b_screen'\x3e\x3c/span\x3e"+f[e],this.reloadFunc())},listAscBtn:function(b){b.preventDefault();a.isScrolled()||(-1<b.currentTarget.className.indexOf("asc")?(a.removeClass(b.currentTarget,"asc"),a.addClass(b.currentTarget,"desc"),k="desc"):(a.removeClass(b.currentTarget,
"desc"),a.addClass(b.currentTarget,"asc"),k="asc"),this.reloadFunc())},removeHandler:function(){this.trigger("removeView");this.off();this.remove()}})});