define(["underscore","backbone","backboneCommon","ajaxControl","command"],function(e,f,d,g,h){return f.View.extend({tagName:"div",className:"gacha commonFrame4",events:function(){var b={};b[d.cgti+" .gachaResultBtn"]=this.resultPop;return b},resultPop:function(b){b.preventDefault();d.isScrolled()||(this.model.toJSON(),g.ajaxSimpleGet(d.linkList.gachaResultHistory,this.model.toJSON().id,function(c){c&&(e.each(c.gachaAnimation.gachaResultList,function(a,b){console.log(a);switch(a.type){case "CARD":a.key=
"card_"+a.cardId+"_c";a.src="resource/image_native/card/image/card_"+a.cardId+"_c.png";a.typeid="card_"+a.charaId;break;case "PIECE":a.item="";a.key="memoria_"+a.pieceId+"_c";a.src="resource/image_native/memoria/memoria_"+a.pieceId+"_c.png";a.typeid="memoria_"+a.pieceId;break;case "ITEM":a.item="",a.key=a.itemId.toLowerCase(),a.src="resource/image_native/item/"+a.itemId.toLowerCase()+"_b.png",a.typeid=a.itemId}}),c.type=1==c.gachaAnimation.gachaResultList.length?"single":"",c.title=b.currentTarget.parentNode.querySelector(".gachaName").textContent,
c.popupType="typeB",console.log(b.currentTarget.parentNode.querySelector(".gachaName").textContent),new d.PopupClass(c,$("#ResultPopTemp").text(),function(){h.getBaseData(d.getNativeObj())}))}))},initialize:function(b){this.listenTo(this.parentView,"removeChildView",this.removeView);this.listenTo(this.model,"change",this.removeView)},render:function(){var b=this.model.toJSON();this.$el.html(this.template({model:b}));return this},removeView:function(){this.off();this.remove()}})});